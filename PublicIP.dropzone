#!/usr/bin/ruby
 
# Dropzone Destination Info
# Name: Public IP
# Description: Grabs your public IP via ifconfig.me curl API and pushes it to you clipboard.
# Events: Clicked
# Creator: Marcell Jusztin
# URL: http://www.marcelljusztin.com
# IconURL: http://www.marcelljusztin.com/images/myip.png
require 'open-uri'

def clicked
  $dz.begin("Retrieving IP Address...")
  ip_server = open('http://icanhazip.com/')
  ip = ip_server.read
  $dz.text(ip)
  $dz.finish("Public IP is on your clipboard")
end